<div class="video-card" data-category="{{ video.data.category }}" data-tags="{{ video.data.tags | join(',') }}" data-title="{{ video.data.title | lower }}" data-description="{{ video.data.description | lower }}">
    <div class="video-thumbnail">
        {% if video.data.custom_thumbnail %}
            <img src="{{ video.data.custom_thumbnail }}" 
                 alt="{{ video.data.title }}" 
                 loading="lazy">
        {% elif video.data.platform == "youtube" %}
            {# PRIORIZA O video_id DO FRONT MATTER #}
            {% set videoId = video.data.video_id %} 
            {% if not videoId %}
                {# FALLBACK: tenta extrair do video_url se video_id n√£o estiver dispon√≠vel #}
                {% set videoId = video.data.video_url | extractYouTubeId %} {# Usando o filtro Eleventy #}
            {% endif %}

            <img src="https://img.youtube.com/vi/{{ videoId }}/maxresdefault.jpg" 
                 alt="{{ video.data.title }}" 
                 loading="lazy"
                 onerror="this.onerror=null; this.src='https://img.youtube.com/vi/{{ videoId }}/hqdefault.jpg';">
        {% elif video.data.video_url.includes("tiktok.com") %}
            <div class="tiktok-thumbnail">
                <div class="tiktok-icon">üéµ</div>
                <span>TikTok</span>
            </div>
        {% elif video.data.video_url.includes("instagram.com") %}
            <div class="instagram-thumbnail">
                <div class="instagram-icon">üì∏</div>
                <span>Instagram</span>
            </div>
        {% else %}
            <div class="generic-thumbnail">
                <div class="generic-icon">üé¨</div>
                <span>V√≠deo</span>
            </div>
        {% endif %}
        
        <div class="play-overlay">
            <div class="play-button">‚ñ∂</div>
        </div>
        
        {% if video.data.duration %}
        <div class="video-duration">
            {% if video.data.duration >= 60 %}
                {{ (video.data.duration / 60) | round }}:{{ (video.data.duration % 60) | string | padStart(2, "0") }}
            {% else %}
                {{ video.data.duration }}s
            {% endif %}
        </div>
        {% endif %}
        
        {% if video.data.featured %}
        <div class="featured-badge">‚≠ê Destaque</div>
        {% endif %}
    </div>
    
    <div class="video-info">
        <h4 class="video-title">{{ video.data.title }}</h4>
        <p class="video-description">{{ video.data.description | truncate(100) }}</p>
        <div class="video-meta">
            <span class="video-category">
                {{ video.data.category | getCategoryName }} {# Usando o novo filtro #}
            </span>
            <span class="video-date">{{ video.data.date | luxonDate("dd/MM/yyyy") }}</span> {# Usando o novo filtro #}
        </div>
        {% if video.data.tags %}
        <div class="video-tags">
            {% for tag in video.data.tags | slice(0, 3) %}
                <span class="tag">#{{ tag }}</span>
            {% endfor %}
        </div>
        {% endif %}
    </div>
    
    <button class="watch-btn" data-video-url="{{ video.data.video_url }}" data-video-title="{{ video.data.title }}">
        <span class="btn-icon">‚ñ∂</span>
        Assistir
    </button>
</div>